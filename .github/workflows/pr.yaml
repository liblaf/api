# This file is @generated by <https://github.com/liblaf/copier-shared>.
# DO NOT EDIT!

name: PR

on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  auto-merge:
    name: Auto-Merge
    permissions:
      pull-requests: write
    runs-on: ubuntu-latest
    concurrency:
      group: ${{ github.workflow }}-auto-merge
      cancel-in-progress: true
    steps:
      - id: auth
        name: Auth App
        uses: liblaf/actions/auth-app@main
        with:
          app-id: ${{ secrets.GH_APP_ID }}
          private-key: ${{ secrets.GH_APP_PRIVATE_KEY }}
      - name: Auto-Merge Release Please
        uses: liblaf/actions/pr-label@main
        with:
          add-label: automerge
          label: "autorelease: pending"
          token: ${{ steps.auth.outputs.token }}
      - name: Auto-Merge Renovate
        uses: liblaf/actions/pr-label@main
        with:
          add-label: automerge
          app: renovate
          token: ${{ steps.auth.outputs.token }}

  review:
    name: Review
    permissions:
      pull-requests: write
    runs-on: ubuntu-latest
    concurrency:
      group: ${{ github.workflow }}-review
      cancel-in-progress: true
    steps:
      - name: Review
        uses: liblaf/actions/pr-review@main
        with:
          author: |-
            github-actions[bot]
            liblaf-bot[bot]
            release-please[bot]
            renovate[bot]
          token: ${{ secrets.GH_PAT || github.token }}
